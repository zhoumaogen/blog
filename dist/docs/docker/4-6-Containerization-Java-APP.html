<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.6 Docker中的Java容器化 | 0x1306da9</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/images/favicon.ico">
    <meta name="description" content="Loading ZhouMaogen&#39;s personal blog, Welcome.🥰">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.fd60b957.css" as="style"><link rel="preload" href="/blog/assets/js/app.33b12444.js" as="script"><link rel="preload" href="/blog/assets/js/3.9147d320.js" as="script"><link rel="preload" href="/blog/assets/js/1.bfbeab4d.js" as="script"><link rel="preload" href="/blog/assets/js/8.db6aa8e5.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.0de298ee.js"><link rel="prefetch" href="/blog/assets/js/11.ac1e678b.js"><link rel="prefetch" href="/blog/assets/js/12.d78201e1.js"><link rel="prefetch" href="/blog/assets/js/13.d5108a73.js"><link rel="prefetch" href="/blog/assets/js/14.39ea8eae.js"><link rel="prefetch" href="/blog/assets/js/15.dc5cdacc.js"><link rel="prefetch" href="/blog/assets/js/16.c8d11632.js"><link rel="prefetch" href="/blog/assets/js/17.48c33129.js"><link rel="prefetch" href="/blog/assets/js/18.0e43c328.js"><link rel="prefetch" href="/blog/assets/js/19.bf789f01.js"><link rel="prefetch" href="/blog/assets/js/20.2dd4f10d.js"><link rel="prefetch" href="/blog/assets/js/21.ef7d73ca.js"><link rel="prefetch" href="/blog/assets/js/22.4312bd82.js"><link rel="prefetch" href="/blog/assets/js/23.cbc4fef7.js"><link rel="prefetch" href="/blog/assets/js/24.8f76e452.js"><link rel="prefetch" href="/blog/assets/js/25.c2212e85.js"><link rel="prefetch" href="/blog/assets/js/26.00c68ab4.js"><link rel="prefetch" href="/blog/assets/js/27.3e468669.js"><link rel="prefetch" href="/blog/assets/js/28.dbe01390.js"><link rel="prefetch" href="/blog/assets/js/29.503b8912.js"><link rel="prefetch" href="/blog/assets/js/30.8fea7b7e.js"><link rel="prefetch" href="/blog/assets/js/31.cb99b11a.js"><link rel="prefetch" href="/blog/assets/js/32.78dce1f4.js"><link rel="prefetch" href="/blog/assets/js/33.86992b70.js"><link rel="prefetch" href="/blog/assets/js/34.ab988ad4.js"><link rel="prefetch" href="/blog/assets/js/35.9fa08ab2.js"><link rel="prefetch" href="/blog/assets/js/36.8cf51c73.js"><link rel="prefetch" href="/blog/assets/js/37.80f99fed.js"><link rel="prefetch" href="/blog/assets/js/38.d5811489.js"><link rel="prefetch" href="/blog/assets/js/39.d9fbbd8c.js"><link rel="prefetch" href="/blog/assets/js/4.ea6efb1f.js"><link rel="prefetch" href="/blog/assets/js/40.afe2520e.js"><link rel="prefetch" href="/blog/assets/js/41.bb96253a.js"><link rel="prefetch" href="/blog/assets/js/42.cc76ee45.js"><link rel="prefetch" href="/blog/assets/js/43.e2d3829c.js"><link rel="prefetch" href="/blog/assets/js/44.a3dccd8b.js"><link rel="prefetch" href="/blog/assets/js/45.68aeffaa.js"><link rel="prefetch" href="/blog/assets/js/46.d1bcac5d.js"><link rel="prefetch" href="/blog/assets/js/47.35ed4afb.js"><link rel="prefetch" href="/blog/assets/js/48.ac2a8075.js"><link rel="prefetch" href="/blog/assets/js/49.64dbb301.js"><link rel="prefetch" href="/blog/assets/js/5.8e486602.js"><link rel="prefetch" href="/blog/assets/js/50.202ed6c2.js"><link rel="prefetch" href="/blog/assets/js/51.24eab109.js"><link rel="prefetch" href="/blog/assets/js/52.adb69e1a.js"><link rel="prefetch" href="/blog/assets/js/53.a486e293.js"><link rel="prefetch" href="/blog/assets/js/54.af8c9c6b.js"><link rel="prefetch" href="/blog/assets/js/55.5c7817c5.js"><link rel="prefetch" href="/blog/assets/js/56.2d37e188.js"><link rel="prefetch" href="/blog/assets/js/57.7e81b532.js"><link rel="prefetch" href="/blog/assets/js/58.7eedb48c.js"><link rel="prefetch" href="/blog/assets/js/59.03c1b996.js"><link rel="prefetch" href="/blog/assets/js/6.220aca8d.js"><link rel="prefetch" href="/blog/assets/js/7.5eabe2a6.js"><link rel="prefetch" href="/blog/assets/js/9.0052c7c0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.fd60b957.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>0x1306da9</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>Loading ZhouMaogen's personal blog, Welcome.🥰</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>0x1306da9</span>
            
          <span data-v-25ba6db2>2016 - </span>
          2024
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/logo.png" alt="0x1306da9" class="logo"> <span class="site-name">0x1306da9</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/软件开发/" class="nav-link"><i class="undefined"></i>
  软件开发
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/随笔/" class="nav-link"><i class="undefined"></i>
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/部署运维/" class="nav-link"><i class="undefined"></i>
  部署运维
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/技术预研/" class="nav-link"><i class="undefined"></i>
  技术预研
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/其它/" class="nav-link"><i class="undefined"></i>
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/keepalived/" class="nav-link"><i class="undefined"></i>
  Keepalived浅析
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/docker/" class="nav-link router-link-active"><i class="undefined"></i>
  Docker基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/modern-cpp/" class="nav-link"><i class="undefined"></i>
  现代C++
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      个人链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/zhoumaogen" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/CodeUnaVia" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_38854285" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><img src="/blog/images/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    0x1306da9
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>47</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>15</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9><li class="social-item" data-v-39576ba9><i class="iconfont reco-weibo" style="color:#fb9b5f;" data-v-39576ba9></i></li><li class="social-item" data-v-39576ba9><i class="iconfont reco-facebook" style="color:#f8b26a;" data-v-39576ba9></i></li></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/软件开发/" class="nav-link"><i class="undefined"></i>
  软件开发
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/随笔/" class="nav-link"><i class="undefined"></i>
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/部署运维/" class="nav-link"><i class="undefined"></i>
  部署运维
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/技术预研/" class="nav-link"><i class="undefined"></i>
  技术预研
</a></li><li class="dropdown-item"><!----> <a href="/blog/categories/其它/" class="nav-link"><i class="undefined"></i>
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/docs/keepalived/" class="nav-link"><i class="undefined"></i>
  Keepalived浅析
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/docker/" class="nav-link router-link-active"><i class="undefined"></i>
  Docker基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/docs/modern-cpp/" class="nav-link"><i class="undefined"></i>
  现代C++
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      个人链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/zhoumaogen" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/CodeUnaVia" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_38854285" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blog/docs/docker/" aria-current="page" class="sidebar-link">Docker基础</a></li><li><a href="/blog/docs/docker/1-Overview.html" class="sidebar-link">1. 概述</a></li><li><a href="/blog/docs/docker/2-0-Install.html" class="sidebar-link">2. 安装</a></li><li><a href="/blog/docs/docker/2-1-GetDocker.html" class="sidebar-link">2.1 使用快捷脚本安装</a></li><li><a href="/blog/docs/docker/2-2-Windows.html" class="sidebar-link">2.2 Windows</a></li><li><a href="/blog/docs/docker/2-3-CentOS.html" class="sidebar-link">2.3 CentOS</a></li><li><a href="/blog/docs/docker/2-4-Ubuntu.html" class="sidebar-link">2.4 Ubuntu</a></li><li><a href="/blog/docs/docker/3-0-Base.html" class="sidebar-link">3. 入门</a></li><li><a href="/blog/docs/docker/3-1-GetStart.html" class="sidebar-link">3.1 设置向导</a></li><li><a href="/blog/docs/docker/3-2-Container.html" class="sidebar-link">3.2 容器</a></li><li><a href="/blog/docs/docker/3-3-Images.html" class="sidebar-link">3.3 镜像</a></li><li><a href="/blog/docs/docker/3-4-Service.html" class="sidebar-link">3.4 服务</a></li><li><a href="/blog/docs/docker/3-5-Swarm.html" class="sidebar-link">3.5 集群</a></li><li><a href="/blog/docs/docker/3-6-ApplicationStack.html" class="sidebar-link">3.6 应用栈</a></li><li><a href="/blog/docs/docker/3-7-Deployment.html" class="sidebar-link">3.7 部署应用</a></li><li><a href="/blog/docs/docker/4-0-Develop.html" class="sidebar-link">4. 开发</a></li><li><a href="/blog/docs/docker/4-1-Dockerfile.html" class="sidebar-link">4.1 使用Dockerfile的最佳实践</a></li><li><a href="/blog/docs/docker/4-2-MultiStage.html" class="sidebar-link">4.2 使用多阶段构建</a></li><li><a href="/blog/docs/docker/4-3-Volume.html" class="sidebar-link">4.3 使用volume数据挂载</a></li><li><a href="/blog/docs/docker/4-4-BestPractices.html" class="sidebar-link">4.4 容器开发最佳实践</a></li><li><a href="/blog/docs/docker/4-5-Containerization-Node.js-APP.html" class="sidebar-link">4.5 Docker中的Node.js容器化</a></li><li><a href="/blog/docs/docker/4-6-Containerization-Java-APP.html" aria-current="page" class="active sidebar-link">4.6 Docker中的Java容器化</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>0x1306da9</span>
            
          <span data-v-25ba6db2>2016 - </span>
          2024
        </a></span></div></div> <div data-v-130b300a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">4.6 Docker中的Java容器化</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>0x1306da9</span></i> <!----> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/blog/docs/docker/4-6-Containerization-Java-APP.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="_4-6-docker中的java容器化"><a href="#_4-6-docker中的java容器化" class="header-anchor">#</a> 4.6 Docker中的Java容器化</h1> <h2 id="_1-前置条件"><a href="#_1-前置条件" class="header-anchor">#</a> 1. 前置条件</h2> <ul><li>JDK 1.8+</li> <li>Gradle 2.3+</li> <li>Docker 最新版。有关 Docker 在的安装，可以参阅 <a href="http://172.22.3.3/Hakugei/docker#%E4%BA%8C%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">Docker 的安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2-用-gradle-构建项目"><a href="#_2-用-gradle-构建项目" class="header-anchor">#</a> 2. 用 Gradle 构建项目</h2> <p>创建一个简单的Gradle项目：目录结构如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├─ gradle/                  - gradle工作目录，存放一些gradle命令和gradle-wrapper包。
	├─ .idea/                   - idea工作目录，存放了idea项目的一些描述文件等。
	├─ .build/                  - gradle构建结果的输出目录。
	├─ script					- 存放一些构建脚本文件
	 ├─ gradle
	  ├─ config.gradle			- 配置脚本 
	  ├─ docker.gradle			- docker构建相关gradle脚本
	├─ src/                     - 源代码目录（该目录中的目录结构是由gradle java plugin约定的）
	|  ├─main/                  - 实现代码
	|  |  ├─java/               - java代码
	|  |  └─resources/          - 静态资源文件
	|  ├─test/                  - 测试代码
	|  |  ├─java/               - java代码
	|  |  └─resources/          - 静态资源文件 
	├─ .gitgnore                - git忽略文件
	├─ Dockerfile				- Dockerfile文件
	├─ gradlew                  - Gradle start up script for UN*X
	├─ gradlew.bat              - Gradle startup script for Windows
	├─ build.gradle             - gradle构建脚本
	└─ README.markdown  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_3-编写相关配置文件"><a href="#_3-编写相关配置文件" class="header-anchor">#</a> 3. 编写相关配置文件</h2> <p>第一步我们来编写<code>config.gradle</code>:</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token comment">// group名称</span>
group <span class="token string">'com.blog.demo'</span>
<span class="token comment">// 版本号</span>
version <span class="token string">'1.0.0'</span>
ext <span class="token punctuation">{</span>
    <span class="token comment">// jar包所在模块名称</span>
    jarProjectName <span class="token operator">=</span> <span class="token string">'fsblog'</span>
    <span class="token comment">// jar包发布的实际名称</span>
    jarArchivesBaseName <span class="token operator">=</span>  <span class="token string">'fsblog'</span>
    <span class="token comment">// jar包版本</span>
    jarVersion <span class="token operator">=</span> version
    <span class="token comment">// maven仓库地址</span>
    mavenUrl <span class="token operator">=</span>  <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span>

    dockerConfig <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token comment">// docker远端构建进程配置地址</span>
            url <span class="token punctuation">:</span> <span class="token string">'http://192.168.37.131:2375/'</span><span class="token punctuation">,</span>

            <span class="token comment">// docker发布仓库地址及认证信息</span>
            registryCredentials <span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token comment">// 发布的镜像仓库地址</span>
                    url <span class="token punctuation">:</span> <span class="token string">'http://192.168.37.131:5000'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// image镜像对应的前缀域名</span>
            imageDomain<span class="token punctuation">:</span><span class="token string">'192.168.37.131:5000'</span><span class="token punctuation">,</span>
            <span class="token comment">// 发布类型 jar or war</span>
            publishType<span class="token punctuation">:</span> <span class="token string">'jar'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><code>docker.gradle</code>:</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url <span class="token string">'http://maven.aliyun.com/nexus/content/groups/public/'</span>
        <span class="token punctuation">}</span>
        maven <span class="token punctuation">{</span>
            url <span class="token interpolation-string"><span class="token string">&quot;https://plugins.gradle.org/m2/&quot;</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        <span class="token function">classpath</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;com.bmuschko:gradle-docker-plugin:3.2.1&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用bmuschko的插件来构建Docker镜像，不依赖本地有docker环境</span>
apply plugin<span class="token punctuation">:</span> com<span class="token punctuation">.</span>bmuschko<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>DockerRemoteApiPlugin

<span class="token keyword">def</span> <span class="token punctuation">$</span>dkConfig <span class="token operator">=</span> ext<span class="token punctuation">.</span>dockerConfig
<span class="token comment">// docker远端配置信息</span>
docker <span class="token punctuation">{</span>
    <span class="token comment">// docker远端构建进程配置地址</span>
    url <span class="token operator">=</span> <span class="token punctuation">$</span>dkConfig<span class="token punctuation">.</span>url
    <span class="token comment">// docker发布仓库地址</span>
    registryCredentials <span class="token punctuation">{</span>
        url <span class="token operator">=</span> <span class="token punctuation">$</span>dkConfig<span class="token punctuation">.</span>registryCredentials<span class="token punctuation">.</span>url
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在idea中引入会报无法解析bmuschko，但不影响执行效果</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>bmuschko<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>image<span class="token punctuation">.</span>DockerBuildImage
<span class="token keyword">import</span> com<span class="token punctuation">.</span>bmuschko<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>image<span class="token punctuation">.</span>DockerPushImage
<span class="token keyword">import</span> com<span class="token punctuation">.</span>bmuschko<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>image<span class="token punctuation">.</span>DockerRemoveImage
<span class="token keyword">import</span> com<span class="token punctuation">.</span>bmuschko<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span>image<span class="token punctuation">.</span>Dockerfile

<span class="token comment">// 拷贝jar包到docker发布目录</span>
task <span class="token function">copyJarToDockerFD</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Copy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dependsOn <span class="token interpolation-string"><span class="token string">&quot;build&quot;</span></span>
    from <span class="token interpolation-string"><span class="token string">&quot;./build/libs/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">jarArchivesBaseName</span></span><span class="token string">&quot;</span></span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;-&quot;</span></span> <span class="token operator">+</span> project<span class="token punctuation">.</span>version <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;.jar&quot;</span></span>
    into <span class="token interpolation-string"><span class="token string">&quot;build/docker/&quot;</span></span>
<span class="token punctuation">}</span>

<span class="token comment">// 拷贝dockerfile到docker发布目录</span>
task <span class="token function">copyDockerFile</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> Copy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    from <span class="token string">'./Dockerfile'</span>
    into <span class="token string">'build/docker/'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 构建镜像</span>
task <span class="token function">buildImage</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> DockerBuildImage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dependsOn copyDockerFile<span class="token punctuation">,</span> copyJarToDockerFD
    group <span class="token operator">=</span> <span class="token string">'Docker'</span>
    inputDir <span class="token operator">=</span> project<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">'build/docker/'</span><span class="token punctuation">)</span>
    tag <span class="token operator">=</span><span class="token punctuation">$</span>dkConfig<span class="token punctuation">.</span>imageDomain <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">jarProjectName</span></span><span class="token string">:&quot;</span></span> <span class="token operator">+</span> project<span class="token punctuation">.</span>version
<span class="token punctuation">}</span>

<span class="token comment">// 发布镜像</span>
task <span class="token function">pushImageToRegister</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> DockerPushImage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    group <span class="token operator">=</span> <span class="token string">'Docker'</span>
    dependsOn buildImage
    conventionMapping<span class="token punctuation">.</span>imageName <span class="token operator">=</span> <span class="token punctuation">{</span> buildImage<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移除build生成的镜像</span>
task <span class="token function">removeBuildImage</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> DockerRemoveImage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    group <span class="token operator">=</span> <span class="token string">'Docker'</span>
    force <span class="token operator">=</span> <span class="token boolean">true</span>
    targetImageId <span class="token punctuation">{</span> buildImage<span class="token punctuation">.</span><span class="token function">getImageId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 发布镜像</span>
task <span class="token function">pushImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dependsOn pushImageToRegister
    dependsOn removeBuildImage
    removeBuildImage<span class="token punctuation">.</span>mustRunAfter pushImageToRegister
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><h2 id="_4-搭建一个本地docker-registry"><a href="#_4-搭建一个本地docker-registry" class="header-anchor">#</a> 4. 搭建一个本地<code>docker registry</code></h2> <p>首先我们需要一台有外网的机器，应为我们首先需要获取<strong>registry</strong>镜像：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">docker</span> pull registry:2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/img/docker-pull-registry.79128859.png" alt="/images/docker-pull-registry.png"></p> <p>启动容器运行registry镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run -d -p <span class="token number">5000</span>:5000 --restart<span class="token operator">=</span>always  -v /opt/registry:/var/lib/registry registry:2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="/images/run_regidtry.png"></p> <blockquote><p>说明：</p> <p>-d ==&gt; 作为daemon进程启动，也就是后台启动</p> <p>-v /opt/registry:/tmp/registry ==&gt; 默认情况下，会将仓库存放于容器内的/tmp/registry目录下，指定本地目录/opt/registry挂载到容器，可以防止容器意外停止后镜像的丢失。</p> <p>-p 5000:5000 ==&gt; 前一个5000是host的端口，后一个是容器的端口。这里是将容器的5000端口映射到host的5000端口</p> <p>--restart 标志会检查容器的退出代码，并据此来决定是否要重启容器，默认是不会重启。
--restart的参数说明
always：无论容器的退出代码是什么，Docker都会自动重启该容器。
on-failure：只有当容器的退出代码为非0值的时候才会自动重启。另外，该参数还接受一个可选的重启次数参数，<code>--restart=on-fialure:5</code>表示当容器退出代码为非0时，Docker会尝试自动重启该容器，最多5次。</p></blockquote> <p>配置https权限支持</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> <span class="token function">vi</span> /etc/docker/daemon.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="/images/daemon.png"></p> <p>防火墙添加5000端口</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">5000</span>/tcp --permanent
firewall-cmd --reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>重启docker服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_5-编写dockerfile文件"><a href="#_5-编写dockerfile文件" class="header-anchor">#</a> 5. 编写Dockerfile文件</h2> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> java:openjdk-8-alpine</span>

<span class="token instruction"><span class="token keyword">ADD</span> fsblog-1.0.0.jar app.jar</span>

<span class="token instruction"><span class="token keyword">RUN</span> sh -c <span class="token string">'touch /app.jar'</span></span>

<span class="token instruction"><span class="token keyword">ENV</span> JAVA_OPTS=<span class="token string">&quot;&quot;</span></span>

<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [ <span class="token string">&quot;sh&quot;</span>, <span class="token string">&quot;-c&quot;</span>, <span class="token string">&quot;java $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar /app.jar&quot;</span> ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>注意：</p> <p>因为镜像包含系统完整的root文件系统，其体积往往是庞大的，因此在Docker设计时，就充分利用Union FS技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个ISO那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层系统联合组成。
镜像构建时会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层，比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。
分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需要的内容，构建新的镜像。</p></blockquote> <h2 id="_6-构建镜像"><a href="#_6-构建镜像" class="header-anchor">#</a> 6. 构建镜像</h2> <p>执行<code>buildImage</code>命令</p> <p><img src="/blog/assets/img/buildimage.e448b6aa.png" alt="/images/buildimage.png"></p> <p>执行成功如图所示：</p> <p><img src="/blog/assets/img/buildimage-success.07c298d7.png" alt="/images/buildimage-success.png"></p> <p>然后执行<code>pushImageToRegister</code>命令推送到自己的仓库，当然也可以直接执行<code>pushImageToRegister</code>命令一步到位，构建镜像并推送到仓库。</p> <p><img src="/blog/assets/img/publish.7f8f94cb.png" alt="/images/publish.png"></p> <blockquote><p>镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry就是这样的服务。
一个Docker Registry中可以包含多个仓库(Repository);每个仓库可以包含多个标签(tag)；每个标签对应一个镜像。
通常，一个仓库会包含一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过&lt;仓库名&gt;:&lt;标签&gt;的格式来指定具体是这个软件那个版本的镜像。如果不给出标签，将以laest作为默认标签。
以ubuntu镜像为例，ubuntu是仓库的名字，其包含有不同的版本标签，如，14.04,16.04。我们可以通过ubuntu:14.04或者ubuntu:16.04来具体指定所需要哪个版本的镜像。如果忽略了标签，比如ubuntu,那将视为ubuntu:latest。
仓库名经常以两段式路径形式出现，比如jwilder/nginx-proxy,前者意味着Docker Registry多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体Docker Registry的软件或服务。</p></blockquote> <p>接下来来看看仓库中有没有我们刚刚推送的镜像：</p> <ol><li>访问仓库<code>ip:port/v2/_catalog</code>,出现如下数据则表示推送成功，仓库中存在我们刚刚推送的镜像</li></ol> <p><img src="/blog/assets/img/registry-1.b98b8bdb.png" alt="/images/registry-1.png"></p> <ol><li>或者执行<code>curl http://192.168.37.131:5000/v2/_catalog</code>，如下图同样表示成功</li></ol> <p><img src="data:image/png;base64,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" alt="/images/registry-2.png"></p> <p>3.测试镜像是否可以运行</p> <p>执行<code>docker pull 192.168.37.131:5000/fsblog:1.0.0</code>获取镜像</p> <p><img src="/blog/assets/img/pull_image.8ee29f46.png" alt="/images/pull_image.png"></p> <p>运行镜像<code>docker run -p 8666:8083 image_id</code></p> <p><img src="/blog/assets/img/success-start.026f01a2.png" alt="/images/success-start.png"></p> <p>成功运行！接下来我们访问一下，这里是将容器的8083端口映射到主机的8666端口，所以我们只要访问虚拟机的<code>ip：8666</code>即可：</p> <p><img src="/blog/assets/img/logo.2ae121da.png" alt="/images/logo.png"></p> <p>至此，成功的使用 Docker、Gradle 来构建、运行、发布一个 Spring Boot 应用了。</p> <p>本文档简要的介绍了一下Docker的基本知识，以及如何利用Gradle和Docker来构建运行，发布一个Spring Boot应用，这些都是目前流行的框架和工具，当然由于本人水平有限，还有许多方面的知识没有涉及到以及在文中叙述可能有一些不准确的地方，希望大家予以帮助，对于Docker的使用类似于服务，集群，应用栈等在本文中没有去实践，有兴趣的同学们可以参考官方文档自行去尝试，对于私有镜像仓库还可以扩展为如何搭建一个https的私有仓库，需要认证才能使用，进一步的可以去了解Harbor镜像仓库的实现，以及<code>K8s</code>容器编排工具， Rancher等的原理及使用，这些是进一步的学习方向。谢谢观看。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/24/2024, 1:43:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/docs/docker/4-5-Containerization-Node.js-APP.html" class="prev">
            4.5 Docker中的Node.js容器化
          </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-cb1513f6></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/blog/assets/js/app.33b12444.js" defer></script><script src="/blog/assets/js/3.9147d320.js" defer></script><script src="/blog/assets/js/1.bfbeab4d.js" defer></script><script src="/blog/assets/js/8.db6aa8e5.js" defer></script>
  </body>
</html>
