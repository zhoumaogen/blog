(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{627:function(s,t,a){s.exports=a.p+"assets/img/3-01.ec7f6b5a.png"},628:function(s,t,a){s.exports=a.p+"assets/img/3-2.a1228e6d.png"},629:function(s,t,a){s.exports=a.p+"assets/img/3-1.c997ef89.png"},630:function(s,t,a){s.exports=a.p+"assets/img/3-3.0d9b53b7.png"},631:function(s,t,a){s.exports=a.p+"assets/img/3-4.ce3638bd.png"},632:function(s,t,a){s.exports=a.p+"assets/img/3-5.f96fb9b8.png"},708:function(s,t,a){"use strict";a.r(t);var e=a(16),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_3-用例-keepalived高可用-nginx负载均衡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-用例-keepalived高可用-nginx负载均衡"}},[s._v("#")]),s._v(" 3. 用例：keepalived高可用+nginx负载均衡")]),s._v(" "),e("h3",{attrs:{id:"_3-1-准备环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-准备环境"}},[s._v("#")]),s._v(" 3.1. 准备环境")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("4 * 虚拟机：")]),s._v(" "),e("ul",[e("li",[s._v("内存：1GB")]),s._v(" "),e("li",[s._v("处理器：1 * 2 Core")]),s._v(" "),e("li",[s._v("存储：20GB")]),s._v(" "),e("li",[s._v("操作系统：CentOS 7")])])]),s._v(" "),e("li",[e("p",[s._v("虚拟机IP地址分配和作用如下表：")])])]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[s._v("名称")]),s._v(" "),e("th",{staticStyle:{"text-align":"left"}},[s._v("IP地址")]),s._v(" "),e("th",{staticStyle:{"text-align":"left"}},[s._v("作用")])])]),s._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[s._v("ka1")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.248.128")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("基于"),e("code",[s._v("nginx")]),s._v("静态资源托管的静态页面1（效果展示用）")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[s._v("ka2")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.248.129")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("基于"),e("code",[s._v("nginx")]),s._v("静态资源托管的静态页面2（效果展示用）")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[s._v("ka3")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.248.130")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("基于"),e("code",[s._v("nginx")]),s._v("的负载均衡器和"),e("code",[s._v("keepalived")]),s._v("主服务器")])]),s._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[s._v("ka4")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("192.168.248.131")]),s._v(" "),e("td",{staticStyle:{"text-align":"left"}},[s._v("基于"),e("code",[s._v("nginx")]),s._v("的负载均衡器和"),e("code",[s._v("keepalived")]),s._v("备服务器")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:a(627),alt:"/images/3-01.png"}})]),s._v(" "),e("ul",[e("li",[s._v("注意事项：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\n$ systemctl stop firewalld\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭selinux，重启生效")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^SELINUX=.*/SELINUX=disabled/'")]),s._v(" /etc/sysconfig/selinux\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时间同步")]),s._v("\n$ ntpdate "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".centos.pool.ntp.org\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许组播")]),s._v("\n$ iptables -A INPUT -d "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.18 -j ACCEPT\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"_3-2-搭建静态页面和负载均衡器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-搭建静态页面和负载均衡器"}},[s._v("#")]),s._v(" 3.2. 搭建静态页面和负载均衡器")]),s._v(" "),e("ol",[e("li",[s._v("安装"),e("code",[s._v("nginx")]),s._v("，四台虚拟机均需要安装：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ yum install nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("命令行输入"),e("code",[s._v("vi /usr/share/nginx/html/index.html")]),s._v("打开默认托管页面的"),e("code",[s._v("html")]),s._v("文件，在页面中增加所在主机"),e("code",[s._v("IP")]),s._v("信息，以区分托管服务的"),e("code",[s._v("真实服务")])])]),s._v(" "),e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("content"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 标题处增加IP信息，ka1和ka2分别添加相应IP --\x3e")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("Welcome to CentOS(192.168.248.129)"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  ...\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("启动"),e("code",[s._v("nginx")]),s._v("：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ systemctl start nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("浏览器访问"),e("code",[s._v("ka1")]),s._v("(192.168.248.128)页面：")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(628),alt:"/images/3-2.png"}})]),s._v(" "),e("ol",[e("li",[s._v("浏览器访问"),e("code",[s._v("ka2")]),s._v("(192.168.248.129)页面：")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(629),alt:"/images/3-1.png"}})]),s._v(" "),e("ol",[e("li",[s._v("命令行输入"),e("code",[s._v("vi /etc/nginx/nginx.conf")]),s._v("打开"),e("code",[s._v("nginx")]),s._v("默认配置文件，配置负载均衡：")])]),s._v(" "),e("div",{staticClass:"language-conf line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# ka3、ka4配置保持一致\nhttp {\n ...\n\n # 增加负载均衡配置\n upstream loadbalance {\n     server 192.168.248.128:80 weight=1 max_fails=3 fail_timeout=20s;\n     server 192.168.248.129:80 weight=1 max_fails=3 fail_timeout=20s;\n }\n\n server {\n     listen 80;\n     server_name  localhost;\n\n     location / {\n         # 增加请求路由配置\n         proxy_pass http://loadbalance;\n         proxy_set_header Host $host:$proxy_port;\n         proxy_set_header X-Forwarded-For $remote_addr;\n     }\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("ol",{attrs:{start:"7"}},[e("li",[s._v("浏览器访问"),e("code",[s._v("ka3")]),s._v("、"),e("code",[s._v("ka4")]),s._v("的"),e("code",[s._v("IP")]),s._v("地址，确认"),e("code",[s._v("192.168.248.130")]),s._v("、"),e("code",[s._v("192.168.248.131")]),s._v("都能被负载均衡路由到"),e("code",[s._v("192.168.248.128")]),s._v("、"),e("code",[s._v("192.168.248.129")]),s._v("页面，以"),e("code",[s._v("ka3")]),s._v("为例：")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(630),alt:"/images/3-3.png"}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(631),alt:"/images/3-4.png"}})]),s._v(" "),e("h3",{attrs:{id:"_3-3-配置并启动keepalived"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-配置并启动keepalived"}},[s._v("#")]),s._v(" 3.3. 配置并启动keepalived")]),s._v(" "),e("ol",[e("li",[s._v("命令行输入"),e("code",[s._v("vi /etc/keepalived/keepalived.conf")]),s._v("，修改配置文件，如下：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("! Configuration File for keepalived\n\n# ka3的state配置为MASTER，ka4配置为BACKUP\n\nglobal_defs {\n   router_id LVS_DEVEL\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface ens33\n    virtual_router_id 51\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.248.110/24 dev ens33 label ens33:1\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("分别在"),e("code",[s._v("ka3")]),s._v("、"),e("code",[s._v("ka4")]),s._v("上输入以下命令启动"),e("code",[s._v("keepalived")]),s._v("：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ systemctl start keepalived\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("启动完毕后，在"),e("code",[s._v("ka3")]),s._v("上输入"),e("code",[s._v("ip a")]),s._v("查看IP信息，可以看到"),e("code",[s._v("虚拟IP")]),s._v("已"),e("code",[s._v("漂移")]),s._v("到网口上：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ka3 ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip a")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN qlen "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" \n       valid_lft forever preferred_lft forever\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": ens33: "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc pfifo_fast state UP qlen "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/ether 00:0c:29:a0:d4:6d brd ff:ff:ff:ff:ff:ff\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.130/24 brd "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.255 scope global dynamic ens33\n       valid_lft 1139sec preferred_lft 1139sec\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.110/24 scope global secondary ens33:1\n       valid_lft forever preferred_lft forever\n    inet6 fe80::41d7:702a:97de:24a1/64 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" \n       valid_lft forever preferred_lft forever\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("浏览器访问虚拟IP地址"),e("code",[s._v("192.168.248.110")]),s._v("，可以路由到"),e("code",[s._v("192.168.248.128")]),s._v("、"),e("code",[s._v("192.168.248.129")]),s._v("页面：")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(632),alt:"/images/3-5.png"}})]),s._v(" "),e("ol",[e("li",[s._v("关闭主服务器虚拟机"),e("code",[s._v("ka3")]),s._v("电源，在"),e("code",[s._v("ka4")]),s._v("上输入"),e("code",[s._v("ip a")]),s._v("查看IP信息，可以看到"),e("code",[s._v("虚拟IP")]),s._v("已"),e("code",[s._v("漂移")]),s._v("到网口上：")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ka4 ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip a")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue state UNKNOWN qlen "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" \n       valid_lft forever preferred_lft forever\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": ens33: "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v(" qdisc pfifo_fast state UP qlen "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    link/ether 00:0c:29:20:5b:61 brd ff:ff:ff:ff:ff:ff\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.131/24 brd "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.255 scope global dynamic ens33\n       valid_lft 1532sec preferred_lft 1532sec\n    inet "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".248.110/24 scope global secondary ens33:1\n       valid_lft forever preferred_lft forever\n    inet6 fe80::b5bd:569f:3e1a:b773/64 scope "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" \n       valid_lft forever preferred_lft forever\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("ol",{attrs:{start:"6"}},[e("li",[s._v("浏览器访问"),e("code",[s._v("虚拟IP")]),s._v("地址"),e("code",[s._v("192.168.248.110")]),s._v("，仍可以路由到"),e("code",[s._v("192.168.248.128")]),s._v("、"),e("code",[s._v("192.168.248.129")]),s._v("页面，至此，"),e("code",[s._v("keepalived")]),s._v("高可用+"),e("code",[s._v("nginx")]),s._v("负载均衡试验完毕！")])])])}),[],!1,null,null,null);t.default=n.exports}}]);